<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Add Course - Student Management System</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet"/>
  <!-- Custom CSS -->
  <link th:href="@{/css/style.css}" rel="stylesheet"/>
</head>
<body>
<div class="d-flex" id="wrapper">
  <!-- Sidebar -->
  <div class="bg-dark text-white" id="sidebar-wrapper">
    <div class="sidebar-heading border-bottom border-secondary">
      <i class="bi bi-mortarboard-fill me-2"></i> SMS Admin
    </div>
    <div class="list-group list-group-flush">
      <a th:href="@{/dashboard}" class="sidebar-link">
        <i class="bi bi-speedometer2"></i> Dashboard
      </a>
      <a th:href="@{/course/List}" class="sidebar-link active">
        <i class="bi bi-book"></i> Courses
      </a>
      <a th:href="@{/students}" class="sidebar-link">
        <i class="bi bi-people"></i> Students
      </a>
      <a th:href="@{/enroll-course}" class="sidebar-link">
        <i class="bi bi-check2-square"></i> Enroll to Course
      </a>
      <form th:action="@{/logout}" method="post" class="sidebar-link mt-auto border-top border-secondary">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <button class="btn btn-link text-white p-0"><i class="bi bi-box-arrow-right"></i> Logout</button>
      </form>
    </div>
  </div>
  <!-- Page Content -->
  <div id="page-content-wrapper">
    <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
      <div class="container-fluid">
        <button class="btn btn-outline-secondary" id="sidebarToggle"><i class="bi bi-list"></i></button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ms-auto mt-2 mt-lg-0">
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                 data-bs-toggle="dropdown"><i class="bi bi-person-circle me-1"></i>
                <span th:text="${#authentication?.name} ?: 'Guest'">Admin User</span>
              </a>
              <div class="dropdown-menu dropdown-menu-end">
                <a class="dropdown-item" th:href="@{/profile}">Profile</a>
                <a class="dropdown-item" th:href="@{/settings}">Settings</a>
                <div class="dropdown-divider"></div>
                <form th:action="@{/logout}" method="post" class="px-3">
                  <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                  <button type="submit" class="dropdown-item text-danger">Logout</button>
                </form>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container-fluid px-4 py-4">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Add New Course</h2>
        <a th:href="@{/course/List}" class="btn btn-secondary">
          <i class="bi bi-arrow-left me-1"></i> Back to List
        </a>
      </div>

      <div class="card mb-4">
        <div class="card-header bg-white">
          <i class="bi bi-pencil-square me-1"></i> Edit Course Details
        </div>
        <div class="card-body">
          <form th:action="@{/course/update/{id}(id=${courseDto.id})}"
                th:object="${courseDto}"
                method="post">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

            <div class="row mb-3">
              <div class="col-md-6">
                <label for="courseName" class="form-label">Course Name</label>
                <input type="text" th:field="*{courseName}" class="form-control" id="courseName"
                       placeholder="e.g. Web Development" required>
                <div class="invalid-feedback" th:if="${#fields.hasErrors('courseName')}"
                     th:errors="*{courseName}"></div>
              </div>

              <div class="col-md-6">
                <label for="courseCode" class="form-label">Course Code</label>
                <input type="text" th:field="*{courseCode}" class="form-control" id="courseCode"
                       placeholder="e.g. WEB101" required>
                <div class="invalid-feedback" th:if="${#fields.hasErrors('courseCode')}"
                     th:errors="*{courseCode}"></div>
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-md-6">
                <label for="duration" class="form-label">Duration</label>
                <input type="text" th:field="*{duration}" class="form-control" id="duration"
                       placeholder="e.g. 6 Months" required>
                <div class="invalid-feedback" th:if="${#fields.hasErrors('duration')}" th:errors="*{duration}"></div>
              </div>

              <div class="col-md-6">
                <label for="courseFee" class="form-label">Course Fee</label>
                <input type="text" th:field="*{fee}" class="form-control" id="courseFee"
                       placeholder="e.g. $1,200" required>
                <div class="invalid-feedback" th:if="${#fields.hasErrors('fee')}" th:errors="*{fee}"></div>
              </div>
            </div>


            <div class="row mb-3">
              <div class="col-md-6">
                <label for="isActive" class="form-label">Is Active</label>
                <select id="isActive" class="form-select" th:field="*{active}">
                  <option th:value="true">Yes</option>
                  <option th:value="false">No</option>
                </select>
              </div>
            </div>
            <div class="mb-3">
              <label for="description" class="form-label">Description</label>
              <textarea th:field="*{description}" class="form-control" id="description" rows="4"
                        placeholder="Enter course description..." required></textarea>
              <div class="invalid-feedback" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
            </div>

            <div class="d-flex justify-content-end">
              <button type="button" class="btn btn-light me-2"
                      onclick="history.back()">Cancel
              </button>
              <button type="submit" class="btn btn-primary"><i class="bi bi-save me-1"></i> Update
                Course
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  window.addEventListener('DOMContentLoaded', event => {
    const sidebarToggle = document.body.querySelector('#sidebarToggle');
    if (sidebarToggle) {
      sidebarToggle.addEventListener('click', event => {
        event.preventDefault();
        document.body.classList.toggle('sb-sidenav-toggled');
      });
    }
  });
</script>
</body>

</html>
